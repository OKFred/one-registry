name: sync-images

on:
    push:
    # è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œæ¯ 6 å°æ—¶è¿è¡Œä¸€æ¬¡
    schedule:
        - cron: "*/10 * * * *"

jobs:
    sync-images:
        runs-on: ubuntu-22.04
        steps:
            - name: Clone repository
              uses: actions/checkout@v2
            - name: registry login & sync ğŸš©ä»“åº“ç™»å½•&é•œåƒåŒæ­¥
              shell: bash
              env:
                  my_src_registry_username: ${{ secrets.my_src_registry_username }}
                  my_src_registry_password: ${{ secrets.my_src_registry_password }}
                  my_src_registry_url: ${{ secrets.my_src_registry_url }}
                  my_dest_registry_username: ${{ secrets.my_dest_registry_username }}
                  my_dest_registry_password: ${{ secrets.my_dest_registry_password }}
                  my_dest_registry_url: ${{ secrets.my_dest_registry_url }}
              run: |
                  date
                  echo 'hello there! Ready to sync all repos--å‡†å¤‡åŒæ­¥é•œåƒ'
                  source ./.github/scripts/main.sh
                  main $my_src_registry_username $my_src_registry_password $my_src_registry_url $my_dest_registry_username $my_dest_registry_password $my_dest_registry_url
